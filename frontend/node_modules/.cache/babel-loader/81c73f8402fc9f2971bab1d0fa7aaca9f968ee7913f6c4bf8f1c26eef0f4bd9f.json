{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kewal\\\\Desktop\\\\expense-tracker_fullstack-master\\\\frontend\\\\src\\\\Components\\\\login\\\\login.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Link } from 'react-router-dom';\n// import styles from \"./login.module.css\"\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { message } from 'antd';\n// import Spinner from \"../components/spinner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [loading, setLoading] = useState();\n  const navigate = useNavigate();\n\n  // const handleSubmit = async (values) => {\n  //     try {\n  //         console.log(values)\n  //       setLoading(true);\n  //       console.log({email,password})\n  //     //   console.log(data)\n  //       await axios.post('http://localhost:8080/login', values);\n  //       setLoading(false);\n  //       message.success(\"login success\");\n  //     //   console.log(data)\n  //     //   localStorage.setItem(\n  //     //     \"users\",\n  //     //     JSON.stringify({ ...data, password: \"\" })\n  //     //   );\n  //       navigate(\"/\");\n  //     // }\n  //     } catch (error) {\n  //       setLoading(false);\n  //       message.error(\"something went wrong\");\n  //     }\n  //   };\n  const handleSubmit = e => {\n    try {\n      e.preventDefault();\n      setLoading(true);\n      axios.post('http://localhost:8080/login', {\n        email,\n        password\n      }).then(result => {\n        console.log(result);\n        if (result.data.success) {\n          console.log(result.data.user);\n          message.success('login succesful');\n          localStorage.setItem(\"user\", JSON.stringify({\n            ...result.data.user,\n            password: \"\"\n          }));\n          setLoading(false);\n          navigate('/');\n        } else {\n          setLoading(false);\n          message.error('incorrect username or password');\n        }\n      });\n    } catch (err) {\n      setLoading(false);\n      message.error('something went wrong');\n    }\n  };\n\n  // ).then(result=> {console.log(result)\n  // if(result.data===\"success\")\n  //     {\n  //         // <Routess/>\n  //         navigate('/home')\n  //     }\n  //     else\n  //     {\n  //         alert(\"username or password is incorrect\")\n  //     }\n  // }).catch(err=>console.log(err))}\n  // }\n  useEffect(() => {\n    if (localStorage.getItem('user')) {\n      navigate('/');\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-box\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-entries\",\n        children: [\"Username \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: e => setEmail(e.target.value),\n          placeholder: \"abc@gmail.com\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-entries\",\n        children: [\"Password \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          onChange: e => setPassword(e.target.value),\n          placeholder: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-entries\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: \"Forgot Password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-entries\",\n          children: [\"Don't have an account?\", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            children: \"sign-up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 39\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-entries submit-button\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 13\n  }, this);\n}\n_s(Login, \"hYYEfRrNLbuR+cg8KbbE5Imh9s8=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","Link","useState","useEffect","axios","useNavigate","message","Login","email","setEmail","password","setPassword","loading","setLoading","navigate","handleSubmit","e","preventDefault","post","then","result","console","log","data","success","user","localStorage","setItem","JSON","stringify","error","err","getItem","target","value"],"sources":["C:/Users/kewal/Desktop/expense-tracker_fullstack-master/frontend/src/Components/login/login.js"],"sourcesContent":["import React from \"react\";\r\nimport {Link} from 'react-router-dom'\r\n// import styles from \"./login.module.css\"\r\nimport { useState ,useEffect} from 'react'\r\nimport axios from 'axios'\r\nimport {useNavigate} from 'react-router-dom' \r\nimport {message} from 'antd'\r\n// import Spinner from \"../components/spinner\";\r\n\r\nfunction Login()\r\n{\r\n    const [email,setEmail]=useState()\r\n    const [password,setPassword]=useState()\r\n    const [loading,setLoading]=useState()\r\n    const navigate=useNavigate()\r\n\r\n    // const handleSubmit = async (values) => {\r\n    //     try {\r\n    //         console.log(values)\r\n    //       setLoading(true);\r\n    //       console.log({email,password})\r\n    //     //   console.log(data)\r\n    //       await axios.post('http://localhost:8080/login', values);\r\n    //       setLoading(false);\r\n    //       message.success(\"login success\");\r\n    //     //   console.log(data)\r\n    //     //   localStorage.setItem(\r\n    //     //     \"users\",\r\n    //     //     JSON.stringify({ ...data, password: \"\" })\r\n    //     //   );\r\n    //       navigate(\"/\");\r\n    //     // }\r\n    //     } catch (error) {\r\n    //       setLoading(false);\r\n    //       message.error(\"something went wrong\");\r\n    //     }\r\n    //   };\r\n    const handleSubmit=(e)=>{\r\n        try\r\n        {\r\n            e.preventDefault()\r\n            setLoading(true)\r\n            axios.post('http://localhost:8080/login',{email,password}).then(result=>{\r\n                console.log(result)\r\n                if(result.data.success)\r\n                {\r\n                    console.log(result.data.user)\r\n                    message.success('login succesful')\r\n                    localStorage.setItem(\"user\",JSON.stringify({...result.data.user,password:\"\"}))          \r\n            setLoading(false)\r\n            navigate('/')\r\n                }\r\n                else\r\n        {\r\n            setLoading(false)\r\n            message.error('incorrect username or password')\r\n        }\r\n            })\r\n            \r\n        }\r\n        catch(err)\r\n        {\r\n            setLoading(false)\r\n            message.error('something went wrong')\r\n        }\r\n    }\r\n\r\n        // ).then(result=> {console.log(result)\r\n        // if(result.data===\"success\")\r\n    //     {\r\n    //         // <Routess/>\r\n    //         navigate('/home')\r\n    //     }\r\n    //     else\r\n    //     {\r\n    //         alert(\"username or password is incorrect\")\r\n    //     }\r\n    // }).catch(err=>console.log(err))}\r\n    // }\r\n    useEffect(()=>{\r\n        if(localStorage.getItem('user'))\r\n        {\r\n            navigate('/')\r\n        }\r\n    })\r\n    return (<div className='login-box'>\r\n        {/* {loading && <Spinner/>} */}\r\n    <form onSubmit={handleSubmit}>\r\n        <h1>Login</h1>\r\n        <div className='login-entries'>\r\n            Username <input type=\"text\" onChange={(e)=>setEmail(e.target.value)} placeholder=\"abc@gmail.com\"/>\r\n        </div>\r\n        <div className='login-entries'>\r\n            Password <input type=\"password\" onChange={(e)=>setPassword(e.target.value)} placeholder=\"password\"/>\r\n        </div>\r\n        <div className='login-wrapper'>\r\n            <div className='login-entries'>\r\n                <a href=\"#\">Forgot Password?</a>\r\n            </div>\r\n            <div className='login-entries'>\r\n                Don't have an account?<Link to='/register'>sign-up</Link>\r\n            </div>\r\n        </div>\r\n        <div className='login-entries submit-button'>\r\n            <input type=\"submit\" value=\"Login\"/>\r\n        </div>\r\n    </form>\r\n</div>);\r\n}\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}